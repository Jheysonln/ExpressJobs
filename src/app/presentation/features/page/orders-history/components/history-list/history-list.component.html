<div
    [ngClass]="{'example-table-container p3 mat-elevation-z8 ': true, 'example-table-scroll-container':columnsHeader.length > 5}">
    <mat-table [dataSource]="listProducts" multiTemplateDataRows>
        <ng-container matColumnDef="{{column}}" *ngFor="let column of columnsHeader">
            <th mat-header-cell *matHeaderCellDef
                [ngClass]="{'size-column-table-scroll': columnsHeader.length > 5,'size-column-table': columnsHeader.length <= 5}">
                {{column}}</th>
            <td mat-cell *matCellDef="let element" [attr.data-label]="column"
                [ngClass]="{'py-2 text-center custom-row':true,'size-column-table-scroll': columnsHeader.length > 5,'size-column-table': columnsHeader.length <= 5}">
                <ng-container [ngSwitch]="column">
                    <div *ngSwitchCase="'estado'" [ngClass]="{'status bg-opacity-25': true,
                'bg-success text-success':element[column] === 'Completed',
                'bg-danger text-danger':element[column] === 'Cancelled',
                'bg-warning  text-warning':element[column] === 'Pending'}">
                        {{element[column]}}</div>
                    <div *ngSwitchDefault style="width:90%;margin:auto">{{element[column]}}
                    </div>
                </ng-container>
            </td>
        </ng-container>
        <!-- Expanded Content Column - Detalle -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell class="j-custom-table-expand" *matCellDef="let element" [attr.colspan]="columnsHeader.length">
                <div class="overflow-hidden w-100"
                    [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                    <div class="d-flex flex-wrap py-3">
                        <div class="col-12 col-md-3 col-lg-3 text-center align-self-center">
                            <img [src]="element.productsImg" class="j-custom-border j-custom-border-shadow p-1"
                                style="border-radius: 100%;width: 100%;max-width: 120px;background: rgba(0,0,0,0.1);">
                        </div>
                        <div class="col-12 col-md-9 col-lg-4 px-2">
                            <div class="col-12 px-3">

                                <p>
                                    <b class="">Telefono: </b>
                                    +51 939-345-656
                                </p>
                                <p>
                                    <b class="">Departamento: </b>
                                    Lima
                                </p>
                                <p>
                                    <b class="">Provincia: </b>
                                    Lima
                                </p>
                                <p>
                                    <b class="">Distrito: </b>
                                    Lima
                                </p>
                                <p>
                                    <b class="">Direccion: </b>
                                    Avenida Villa ventura Calle Simon Bolivar cmt 9
                                </p>
                                <p>
                                    <b class="">Promedio: </b>
                                    <b class="cursor-pointer">
                                        <i class="bx bxs-star text-warning"></i>
                                        <i class="bx bxs-star text-warning"></i>
                                        <i class="bx bxs-star text-warning"></i>
                                        <i class="bx bxs-star text-warning"></i>
                                        <i class="bx bxs-star text-secondary"></i>
                                    </b>
                                </p>
                            </div>
                        </div>
                        <div class="col-12 col-md-9 col-lg-5 px-2">
                            <div class="col-12 col-md-6 col-xl-12 py-3">
                                <mat-form-field appearance="outline" class="w-100">
                                    <mat-label>Breve Descripción</mat-label>
                                    <textarea matInput #nombre autocomplete="off" rows="5"
                                        placeholder="Ingrese un resumen de lo que necesite, recuerde ser lo más específico posible."></textarea>
                                    <mat-hint>{{nombre.value.length}} / 150 caracteres</mat-hint>
                                </mat-form-field>
                            </div>
                            <div class="col-12 py-3 py-lg-0 ms-auto text-center">
                                <div class="h-100 d-flex flex-wrap align-content-center justify-content-evenly">
                                    <button mat-mini-fab matTooltip="View" color="primary"
                                        class="j-custom-mat-icon-hover mat-icon-hover-primary">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                           
                        </div>
                    </div>
                </div>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnsHeader; sticky: true"></tr>
        <!-- efectos que presentara la fila al expandirse -->
        <tr mat-row *matRowDef="let element; columns: columnsHeader;" class="table-hover-row"
            [class.table-select-row]="expandedElement === element"
            (click)="expandedElement = expandedElement === element ? null : element">
        </tr>
        <!-- Tamaño que se expandira -->
        <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="table-detail-row">
        </tr>
    </mat-table>
</div>